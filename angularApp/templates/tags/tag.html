<div class="col-md-7 mobileIn" id="tagpanel2">
  <h1 id="mobileContact" class="tagDetailHeader">Tags</h1>
  <img src="img/arrow.png" class="backArrow" />
	<h2 id="contactname" class="tagname">
    {{tag.name}}
    <span class="hidden">{{id}}</span>
  </h2>
  <div id="detailmenubar">
    <img src="img/contacts.png" />
    <img src="img/events.png" />
    <img src="img/tasks.png" />
    <img src="img/tags.png" class="selected" />   
    <a href="javascript:void(0)"><img src="img/create.png" class="addTag" ng-click="create()" /></a>
    <img src="img/trash.png" id="trashicon"/>    
    <button id="destroy">{{id}}</button>
  </div>
  <div class="panelcontent" id="tagscontent">
    <div class="infopanel">
      <form id="addForm">
        <div class="formrow">Add contacts: <br />
          <input id="typeAheadAddContact" />
        </div>
      </form>
      <div class="contactrow personrow">
        <div ng-repeat="contact in tag.contacts | orderBy: ['name', 'emails[0].email', 'id']">
          <a ui-sref="contacts.contact({contact_id:contact.id})"><img src="img/contacts.png" class="contactIcon">
          <h4>{{getContactTitle(contact)}}</h4><span class="hidden">{{contact.id}}</span></a><img src="img/close.png" class="removeAssoc" />
        </div>
        <h4 ng-if="tag.contacts.length == 0"><i>No associated contacts</i></h4>
      </div>
    </div>
    <div class="infopanel">
      <form id="addForm">
        <div class="formrow">Add events: <br />
          <input id="typeAheadAddEvent" />
        </div>
      </form>
      <div class="contactrow eventrow">
        <div ng-repeat="event in tag.events">
          <a ui-sref="events.event({event_id:event.id})"><img src="img/events.png" class="eventIcon">
          <h4>{{event.title}}</h4><span class="hidden">{{event.id}}</span></a><img src="img/close.png" class="removeAssoc" />
        </div>
        <h4 ng-if="tag.events.length == 0"><i>No associated events</i></h4>
      </div>
    </div>
    <div class="infopanel">
      <form id="addForm">
        <div class="formrow">Add tasks: <br />
          <input id="typeAheadAddTask" />
        </div>
      </form>
      <div class="contactrow taskrow">
        <div ng-repeat="task in tag.tasks">
          <a ui-sref="tasks.task({task_id:task.id})"><img src="img/tasks.png" class="taskIcon">
          <h4>{{task.title}}</h4><span class="hidden">{{task.id}}</span></a><img src="img/close.png" class="removeAssoc" />
        </div>
        <h4 ng-if="tag.tasks.length == 0"><i>No associated tasks</i></h4>
      </div>
    </div>
    <div class="infopanel selected">                      
      <h5>Count: {{tag.count}}</h5>
    </div>
  </div>
</div>

<div id="detailPanel" class="panelIn">
  <div class="row">
    <div class="col-md-4 dCol" id="dCol1">
      <div>
        <h1 id="contactname" class="tagname">
            {{tag.name}}
            <span class="hidden">{{id}}</span>
        </h1>
        <div class="contactgroup relatedObjects taggedObjects">
          <div class="contactitem">
            <img src="img/contacts.png" />
            <span>({{tag.contacts.length}})</span>
          </div>
          <div class="contactitem">
            <img src="img/events.png" />
            <span>({{tag.events.length}})</span>
          </div>
          <div class="contactitem">
            <img src="img/tasks.png" />
            <span>({{tag.tasks.length}})</span>
          </div>
        </div>
        <a href="javascript:void(0)"><img src="img/create.png" class="detailCreate" ng-click="create()" /></a>
        <img id="detailTrash" src="img/trash.png" />
      </div>
      <img class="columnDivider" src="img/divider_yellow.png" />
    </div>
      <div class="col-md-4 dCol" id="dCol2">
        <div>
          <div class="columnhead">
            <img src="img/contacts.png" />
            <h3>Events</h3>
          </div>
          <br />
          <div class="detailSection">
            <div class="detailTitle">Open<img src="img/arrow_black.png" class="accordionarrow detailArrow arrowdown" ng-click="showOpenEvents=!showOpenEvents"></div>
            <ul class="columnlist" ng-show="showOpenEvents" >
              <div ng-repeat="event in tag.events | openEvents:events">
                <li><a ui-sref="events.event({event_id:event.id})">{{event.title}}</a></li>
              </div>
              <li ng-if="(tag.events | openEvents:events).length==0"><i>No upcoming events</i></li>
            </ul>
          </div>
          <div class="detailSection">
            <div class="detailTitle">History<img src="img/arrow_black.png" class="accordionarrow detailArrow arrowdown" ng-click="showClosedEvents=!showClosedEvents"></div>
            <ul class="columnlist" ng-show="showClosedEvents">
              <div ng-repeat="event in tag.events | closedEvents:events">
                <li><a ui-sref="events.event({event_id:event.id})">{{event.title}}</a></li>
              </div>
              <li ng-if="(tag.events | closedEvents:events).length==0"><i>No past events</i></li>
            </ul>
          </div>
        </div>
        <img class="columnDivider" src="img/divider_blue.png" />
      </div>
    <div class="col-md-4 dCol" id="dCol3">
      <div>
        <div class="columnhead">
          <img src="img/contacts.png" />
          <h3>Contacts</h3>
        </div>
        <br />
        <ul class="columnlist">
          <div ng-repeat="contact in tag.contacts | orderBy: ['name', 'emails[0].email', 'id']">
            <li><a ui-sref="contacts.contact({contact_id:contact.id})">{{getContactTitle(contact)}}</a></li>
          </div>
          <li ng-if="tag.contacts.length == 0"><i>No associated contacts</i></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div id="detailPanelHider"></div>
<div class="col-md-1 flipswitch fsyellow">
  <img src="img/fliparrow_yellow.png" id="fliparrow"/>
</div>